# Run detect_system_deps.py to detect dependencies preinstalled in system.
# conanfile.py accepts options in format `system_<req_name>` or `with_<req_name>`.
#
# The `system_<req_name>` option allows choosing between preinstalled dependency
# and a dependency that needs to be installed from ConanCenter.
#
# The `with_<req_name>` option enables/disables the system dependency.
# This doesn't allow installing the dependency from ConanCenter.
# Currently, only "hyperscan" is such an option.
#
# Requirement options:
# * `cmake` - what to look for in CMake, e.g. "fmt/8.0.0" -> `find_package(fmt 8.0.0)`
# * `conan` - what to add to Conan's requires
# * `upstream` - when installing directly from upstream (instead of via ConanCenter),
#                specifies the repo and commit to download: "<site> <repo> <commit>"
# * `prereq` - what option from `conanfile.py` requires this dependency
#
# Run `precache_upstream_deps.py` to download and export `upstream` deps as specified.
# This is alternative to ConanCenter, but may be needed when a fix didn't yet make it
# into ConanCenter. The `upstream` must contain a `conanfile.py` which exports
# a matching package (name/version) when exported via `conan export .`.

requirements:
  fmt:
    cmake: "fmt/8.0.0"
    conan: "fmt/8.1.1"
  range_v3:
    cmake: "range-v3/0.11.0"
    conan: "range-v3/0.11.0"
    # This version contains a fix that is needed for Clang 13 build:
    upstream: "github.com ericniebler/range-v3 83783f578e0e6666d68a3bf17b0038a80e62530e"
  pegtl:
    cmake: "pegtl/3.2.0"
    conan: "taocpp-pegtl/3.2.5"
  magic_enum:
    cmake: "magic_enum/0.7.3"
    conan: "magic_enum/0.7.3"
  zlib:
    cmake: "ZLIB/"
    conan: "zlib/1.2.12"
    prereq:
      - data
  glfw:
    cmake: "glfw3/3.3.0"
    conan: "glfw/3.3.7"
    prereq:
      - graphics
  vulkan:
    cmake: "Vulkan/"
    conan: "vulkan-loader/1.3.204.1"
    prereq:
      - graphics
  freetype:
    cmake: "Freetype/2.10.0"
    conan: "freetype/2.11.1"
    prereq:
      - text
  harfbuzz:
    cmake: "harfbuzz/"
    conan: "harfbuzz/4.2.0"
    prereq:
      - text
  hyperscan:
    cmake: "Hyperscan/"
    prereq:
      - tools
  boost:
    cmake: "Boost/1.75.0"
    conan: "pfr/2.0.2"  # 2.0.3 not yet in ConanCenter
    prereq:
      - data
  catch2:
    cmake: "Catch2/"
    conan: "catch2/2.13.8"
    prereq:
      - tests
  benchmark:
    cmake: "benchmark/1.5.0"
    conan: "benchmark/1.6.1"
    prereq:
      - benchmarks
